# Apache .htaccess dosyası - Angular SPA için
# Sitemap ve robots.txt için özel kurallar

# Sitemap.xml'i doğrudan serve et
<FilesMatch "^(sitemap\.xml|robots\.txt)$">
  Header set Content-Type "text/xml; charset=utf-8"
  Header set Cache-Control "public, max-age=3600"
</FilesMatch>

# Robots.txt için text/plain content type
<FilesMatch "^robots\.txt$">
  Header set Content-Type "text/plain; charset=utf-8"
</FilesMatch>

# Angular SPA için - tüm istekleri index.html'e yönlendir
# Ancak statik dosyalar (sitemap.xml, robots.txt, resimler vb.) için istisna yap
<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Statik dosyalar için rewrite yapma (sitemap, robots, resimler, CSS, JS vb.)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !^/(sitemap\.xml|robots\.txt|.*\.(jpg|jpeg|png|gif|svg|ico|css|js|woff|woff2|ttf|eot))$ [NC]
  
  # Diğer tüm istekleri index.html'e yönlendir
  RewriteRule ^ index.html [L]
</IfModule>

# Gzip compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Cache control
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType text/xml "access plus 1 hour"
  ExpiresByType text/plain "access plus 1 hour"
</IfModule>

